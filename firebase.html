<!DOCTYPE html>
<html>
<head>
    <title>Firebase Real Time Database</title>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.6.2/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-analytics.js"></script>

    <script>// Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyC0f_ryFOq-6savQpcI5fGN8TG8JDlr1so",
            authDomain: "fir-realtime-db-e830d.firebaseapp.com",
            databaseURL: "https://fir-realtime-db-e830d.firebaseio.com",
            projectId: "fir-realtime-db-e830d",
            storageBucket: "fir-realtime-db-e830d.appspot.com",
            messagingSenderId: "5761920324",
            appId: "1:5761920324:web:86d19748996f370aa8bb11",
            measurementId: "G-PGEPJMH1Q5"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        </script>
    <style>
    </style>
</head>
<body>
    <table>
        <tr>
            <td> ID </td>
            <td><input type="text" name="ID" id="user_ID" /></td>
        </tr>
        <tr>
            <td>Name: </td>
            <td><input type="text" name="user_name" id="user_name" /></td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="button" value="Save" onclick="save_user()"/>
                <input type="button" value="Update" onclick="update_user()" />
                <input type="button" value="Delete" onclick="delete_user()" />
            </td>
        </tr>
    </table>
    <h3> User List </h3>
    <table id="tbl_user_list">
        <tr>
            <td>#ID</td>
            <td>NAME</td>
        </tr>
    </table>

    <script>var tblUsers = document.getElementById('tbl_users_list');
        var databaseRef = firebase.database().ref('users/');


        function save_user() {

            var user_name = document.getElementById('user_name').value;

            var user_id = document.getElementById('user_ID').value;

            var uid = firebase.database().ref().child('users').push().key;

            var data = {
                user_id: uid,
                user_name: user_name
            }

            var updates = {};
            updates['/users/' + uid] = data;
            firebase.database().ref().update(updates);

            alert('The user has been created successfully!');
            reload_page();

        }
        function update_user() {

            var data = {
                user_id: user_id,
                user_name: user_name
            }

            var updates = {};
            updates['/users/' + user_id] = data;
            firebase.database().ref().update(updates);

            alert('The user is updated successfully!');

            relaod_page();

        }
        function delete_user() {
            firebase.database().ref().child('/users/' + user_id).remove();
            alert('The user has been removed!');
            reload_page();

        }
        function relaod_page() {
            window.location.reload();
        }</script>

</body>
</html>
